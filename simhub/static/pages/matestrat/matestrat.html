<!DOCTYPE html>

<html>
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="evolution natural selection mating violence homicide" name="keywords">
<meta content="Fatal fights for mating" name="description">

<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="bootstrap-3.3.2-dist/css/bootstrap.min.css">
<link rel="stylesheet" href="chartist.min.css">
<link rel="stylesheet" href="jquery-ui/jquery-ui.min.css">
<link rel="stylesheet" href="matestrat.css">

<title>Why don't animals kill each other when competing for mates?</title>

<!--Javascript sources-->
<script type="text/javascript" src="jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="jquery.async.js"></script>
<script type="text/javascript" src="chartist.min.js"></script>
<script type="text/javascript" src="MersenneTwister.js"></script>
<script type="text/javascript" src="jquery-ui/jquery-ui.min.js"></script>
<script type="text/javascript"
	src="bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="jquery.validate.min.js"></script>
<script type="text/javascript" src="additional-methods.min.js"></script>
<script type="text/javascript" src="matestrat.js"></script>
 <script>
	$(function() {
		$( "#explanation" ).accordion({
			active: false,
			collapsible: true,
			heightStyle: "content"
		});
		$( "#parameters").accordion({
			collapsible: true,
			heightStyle: "content"
		});
	});
</script>
</head>

<body>

<div id="wrap" class="container">

<div id="header" class="starter-template">

<h1>Why don't dangerous animals kill often when competing for mates?</h1>

</div>

<div id="content">

<p>
This simulation tries to aid our understanding of how <em>non-lethal</em>  <a href="http://en.wikipedia.org/wiki/Agonistic_behaviour">agonistic</a> behaviour evolves among males competing for mates.
</p>

<div id="explanation">

<h3>What do King cobras and black mambas have in common?</h3>

<div>

<p>
The inspiration for this simulation came first from a <a href="http://video.nationalgeographic.com/video/worlds-deadliest/deadliest-king-cobra">National Geographic video</a> that showed two male King Cobras performing an elaborate wrestling match to pin each other down, yet they made no attempt to bite one another. <a href="http://en.wikipedia.org/wiki/Agonistic_behaviour#Example:_Black_mamba_.28Dendroaspis_polylepis.29">Male black mambas have a similar ritual</a> when <a href="http://www.arkive.org/black-mamba/dendroaspis-polylepis/image-G77528.html">competing</a> for mates.
</p>

<p>
The second inspiration was from watching male wildebeests competing for female mates in a South African game park. Despite witnessing several fights, none of them resulted in any harm to the protagonists.
</p>

<p>
Why should such non-lethal behaviour evolve? It isn't obvious that extremely homicidal agonistic behaviour when competing for mates should be an evolutionary disadvantage. On the contrary, permanently eliminating competitors might on the face of it even seem advantageous.
</p>

<p>
Yet, by tinkering with the various parameters in this <a href="http://en.wikipedia.org/wiki/Agent-based_model">agent-based simulation</a>, you can see that there are many situations where there is selective pressure <em>against</em> lethal behaviour. There are also scenarios in which non-lethal individuals often don't become dominant within the population, and the population goes extinct. Yet there are other scenarios where the proportion of homicidal males is unaffected, or where they are reduced to a stable minority.
</p>

<h4>How the simulation works</h4>

<p>
When the <em>Simulate</em> button is clicked, the simulation executes as follows
</p>

<p>
<ol>
<li>A population of individuals, or agents, is initialised. The male-female split is about 50-50. All individuals (male and female) have a set of genes which indicate how lethal they are.</li>
<li>The simulation then consists of multiple iterations, where each iteration could be thought of as a mating season. On every iteration, all the males and females are randomly shuffled.</li>
<li>At the beginning of each iteration, some individuals will die. The number of mating seasons that individuals live is determined by an option that you can change.</li>
<li>In each iteration, males are paired to fight with each other. The male that wins the fight will kill the losing male with probability proportional to the number of its lethal genes that are switched on.</li>
<li>Also, there is a revenge factor (which you can switch off). This is the probability that a homicidal male will also be mortally wounded by its adversary. I introduced this because of the possibility that a murderous individual might be injured by a dying angry opponent. E.g. if a black mamba decides to bite his adversary, this would signal the probability that the adversary bites back before dying. Whether or not this is a realistic parameter, I have no idea. The higher it is though, the greater the probability that non-lethal behaviour evolves, or if it doesn't that the population goes extinct. Setting the revenge factor to zero is however more interesting, because even here non-lethal behaviour evolves in many scenarios.</li>
<li>A winning --and surviving-- male mates with one other female in that iteration (or mating season), if the monogamous option is chosen. If the polygamous option is chosen, the number of mates the male has is equal to the proportion of females to males in the population, but at least one. Each female only mates once in a mating season.</li>
<li>The females then give birth. The number of babies per female can also be changed by a user-specified option.
</li>
<li>A newly born individual's genes are a random combination of the male and female parents. The more peaceful the parents, the more peaceful the child is likely to be.</li>
</ol>
</p>

<p>
There are two sets of output from the simulation: a graph and a table. The graph shows the change in population (red) after each iteration, or mating season, and the change in the number of <em>peaceful</em> individuals (yellow). A peaceful individual is defined as one who has fewer lethal genes than the proportion specified by the <em>Proportion homicidal</em> parameter (under <em>Advanced parameters</em>).
</p>

<p>
The second set of outputs is a table, which produces interesting demographics for every iteration.
</p>

<p>
Play around with the advanced parameters to see the way lethal versus non-lethal agonistic behaviour is affected.
</p>

<p>
One interesting observation is that the same set of parameters can lead to wildly different outcomes on repeated runs of the simulation. Even in this very simple model, there is much unpredictability.
</p>

<h4>Parameters</h4>

<dl>
<dt>Population</dt>
<dd>Initial number of individuals (or agents) in the simulation</dd>
<dt>Mating seasons</dt>
<dd>Number of iterations to run the simulation. Each iteration corresponds to a mating season in which males compete with each other, and the winners mate with females, producing offspring.</dd>
<dt>Update delay</dt>
<dd>Minimum time delay of user interface updates between each iteration. Default is 100 milliseconds. Set to 0 if you want a minimal delay between iterations.</dd>
</dl>
<h4>Advanced parameters</h4><dl>
<dt>Maximum population</dt>
<dd>The simulation stops if the population exceeds this value. If this is set too high, the simulation can become very slow if the population explodes.</dd>
<dt>Number of genes</dt>
<dd>Number of genes that every individual has that determine how lethal males are if they win a fight. Genes are either on or off. The likelihood of a winning male killing a losing male is proportional to the number of his genes that are switched on divided by his total number of genes.</dd>
<dt>Proportional homicidal</dt>
<dd>This is the proportion of genes that are likely to be switched on, i.e. to make the agent more likely to be homicidal. For each gene of a newly born agent, a random number is generated from 0 to 1. If it is less than the value of this parameter, it is set to zero (non-homicidal), else one. To simply model the effects of the birth rate and death rate from old age, set this parameter to zero.</dd>
<dt>Revenge factor</dt>
<dd>The revenge factor tries to model the risk of a homicidal male who wins a fight being killed by the losing adversary. The thinking behind it is that a male who is homicidal is more likely to be mortally wounded by his adversary. By default it is set to zero. Setting it 0.2, or even 0.1, confers a great selection advantage to being non-homicidal.</dd>

<dt>Discrete Weibull</dt>
<dd>This <a href="http://www.math.wm.edu/~leemis/chart/UDR/PDFs/Discreteweibull.pdf" target="_blank">distribution</a> is a stochastic, more sophisticated, way of modelling the number of seasons an agent lives than the <em>Fixed number of mating seasons</em> parameter. The <em>p</em> parameter is the probability the individual will die before any mating season. The <em>&Beta;</em> parameter determines the shape of the distribution. The higher the value of <em>&Beta;</em> the narrower the distribution.</dd>
<dt>Fixed number of mating seasons</dt>
<dd>If this parameter is selected every agent lives through exactly the specified number of mating seasons, unless he is killed by another male.</dd>
<dt>Binomial distribution</dt>
<dd>This is a stochastic, more sophisticated, way of modelling the number children that a pair of mating agents will have, than the <em>Fixed number of children</em> parameter. Set <em>n</em> to the maximum number of children that can be produced in a single mating, and <em>p</em> to the probability that any single child will be born live. The average number of live children that will be born is <em>p&nbsp;*&nbsp;n</em>.</dd>
<dt>Fixed number of children</dt>
<dd>If this parameter is selected, a pair of mating agents will produce exactly the specified number of children.</dd>
<dt>Mating strategy</dt>
<dd>If monogamous is selected (the default) then each male that wins a fight will mate with exactly one female. If polygamous is selected then each male that wins a fight will mate with a number of females proportional to the ratio of females to males.</dd>
<dt>Random number generation</dt>
<dd>By default the simulation uses the Javascript random number generator.
  If you need a replicable high-quality, generator select the Mersenne Twister option, which also allows you to change the
  generator's seed.</dd>
</dl>


<h4>Some preliminary results</h4>

<p>
I have not methodically analysed the results. In the experiments described here the update delay was set to zero.
</p>

<ul>
<li>With the default parameters widely different outcomes occur on different runs. Nevertheless, on balance there appears to be selective pressure against being homicidal.</li>

<li>The revenge factor selects against being homicidal. Even setting it to 0.1 (i.e. 10%) with all other parameters left at their defaults drives down the proportion of homicidal genes, usually very quickly, in most runs.</li>

<li>Tinkering with other parameters can result in vastly different results. For example, switching the mating strategy to polygamous does not appear to cause any selective pressure against being homicidal. Though it's unclear to me how realistic the polygamous strategy is.
</li>

</ul>

<p>
Finally, a word of caution. This simulation tool is a highly simplified account of reality. All it can hope to achieve is to inspire some thinking about the evolution of non-lethal agonistic behaviour. Be weary about drawing firm conclusions from it.
</p>

</div>


</div>


<div class="row">

<div id="option-div" class="col-md-6">

<form class="cmxform" id="parameters-form" method="get" action="">

<div id="parameters" class="accordion">

<h3>Simulation parameters</h3>

<div>

<p><label class="field" for="population">Population</label>
<input class="option" type="number" id="population" name="population"
       min="1" max="20000" step="1" value="50" required />
<img class="help" src="help_icon.png" onclick="$('#population-help').toggleClass('hide');" class="help"/>
</p>
<p id="population-help" class="help-text hide">
This is the size of the initial population in the simulation.<br />
<span class="good-range">Recommended range: 20 to 1000 (integer)</span>
</p>

<p><label class="field" for="iterations">Mating seasons</label>
<input class="option" type="number" id="iterations" name="iterations" min="1"
       max="10000" step="1" value="300" required />
<img class="help" src="help_icon.png" onclick="$('#iterations-help').toggleClass('hide');" class="help"/>
</p>
<p id="iterations-help" class="help-text hide">
This is the number of iterations the simulation will run for. Each iteration corresponds to a mating season in which the male individuals in the simulation will compete against each other for female mates.<br />
<span class="good-range">Recommended range: 5 to 100 (integer)</span>
</p>

<p><label class="field" for="delay">Update delay (ms)</label>
  <input class="option" type="number" id="delay" name="delay" min="0" step="1"
	 max="10000" value="100" required />
  <img class="help" src="help_icon.png" onclick="$('#delay-help').toggleClass('hide');" class="help"/>
</p>
<p id="delay-help" class="help-text hide">
  After each mating season (or iteration) the screen is updated. This is the delay between screen updates. It is in milliseconds (1000ms = 1 second). For no delay, set to zero.<br />
  <span class="good-range">Recommended range: 0 to 1000 (integer)</span>
</p>

<p></p>

</div>

<h3>Advanced parameters</h3>

<div>

<fieldset>

<legend class="sub-legend">Homicidal mating genes</legend>

<p><label class="field" for="mating_genes">Number of genes</label>
  <input class="option" type="number" id="mating_genes" name="mating_genes"
	 value="1" min="1" max="100" step="1" required />
  <img class="help" src="help_icon.png" onclick="$('#mating_genes-help').toggleClass('hide');" class="help"/>
  <p id="mating_genes-help" class="help-text hide">
    This is the number of genes determining homicidal behaviour that each individual has. When two males are paired to fight for mates, the probability that the winner will kill the loser is proportional to the number of his homicidal mating genes that are switched on. In this simulation all genes are boolean, i.e. either on or off, and all individuals have the same number of genes. <br />For example, let's say individuals have ten genes. If a male individual X has six genes switched on, then if he wins a fight, there is a six out of ten (or 60%) chance that he will kill his adversary. <br />Let's say all individuals have one gene, then each male individual either has a zero or 100% chance of killing his adversary if he wins a fight.<br />
    <span class="good-range">Recommended range: 1 to 10 (integer)</span>
  </p>
</p>

<p><label class="field" for="homicidal_genes">Proportion homicidal</label>
  <input class="option" type="number"
	 id="homicidal_genes" name="homicidal_genes" value="0.5" min="0"
	 max="1" step="0.01" required />
  <img class="help" src="help_icon.png" onclick="$('#homicidal_genes-help').toggleClass('hide');" class="help"/>
  <p id="homicidal_genes-help" class="help-text hide">
    This is the proportion of genes in the population that are switched on to being homicidal. When two males are paired to fight for mates, the probability that the winner will kill the loser is proportional to the number of his homicidal mating genes that are switched on to.<br />
    <span class="good-range">Recommended range: 0 to 1 (real)</span>
  </p>
</p>

<p><label class="field" for="revenge_factor">Revenge factor</label>
  <input class="option" type="number" id="revenge_factor" required
	 name="revenge_factor" value="0" min="0" max="1" step="0.1" />
  <img class="help" src="help_icon.png" onclick="$('#revenge_factor-help').toggleClass('hide');" class="help"/>
  <p id="revenge_factor-help" class="help-text hide">
    When a male kills another male, there is a probability, specified by this option, that before dying the losing male will inflict mortal wounds on the winner. If this event occurs, the winning male does not get to reproduce and dies. If set to 0.1 or above this dramatically increases the chances of non-homicidal males becoming dominant in the population. If set to zero, results can be very interesting and unpredictable because in some simulations non-homicidal males still become dominant, while in others the population goes extinct because of the high homicide rate. And yet in others still, even with a large proportion of homicidal males, the population explodes.<br />
    <span class="good-range">Recommended range: 0 to 1 (real)</span>
  </p>
</p>


</fieldset>

<fieldset>

<legend class="sub-legend">Mating seasons before dying of old age</legend>

<p>
<label class="radio-field" for="mating_weibull">Discrete Weibull</label>
<input type="radio" id="mating_weibull" name="seasons" value="mating_weibull"
       onclick="$('#weibull-parms').removeClass('hide');
		$('#fixed_season').addClass('hide');" checked />


<label class="radio-field" for="mating_fixed">Fixed</label>
<input type="radio" id="mating_fixed" name="seasons" value="fixed"
       onclick="$('#weibull-parms').addClass('hide');
		$('#fixed_season').removeClass('hide');" />

<img class="help" src="help_icon.png" onclick="$('#seasons-help').toggleClass('hide');" class="help"/>
</p>

<p>
  <span id="weibull-parms">
    <label class="radio-field" for="discrete_weibull_p">p</label>
    <input class="radio-option" type="number" id="discrete_weibull_p"
	   name="discrete_weibull_p" value="0.1" min="0" max="1" step="0.0001"
	   onchange="$('#avg-seasons').text(avg_weibull())" required />
    <label class="radio-field" for="discrete_weibull_B">&Beta;</label>
    <input class="radio-option" type="number" id="discrete_weibull_B"
	   name="discrete_weibull_B" value="2.5" min="0" max="100" step="0.001"
	   onchange="$('#avg-seasons').text(avg_weibull())" required /><br />
    <span class="radio-field">&nbsp;&nbsp;&nbsp;Average # seasons: </span>
    <span class="radio-field" id="avg-seasons"></span>
  </span>

  <span id="fixed_season" class="hide">
    <label class="radio-field" for="fixed_seasons">Seasons</label>
    <input class="radio-option" type="number" id="fixed_seasons" required
	   name="fixed_seasons" value="3" min="1" max="10000" step="1"  />
  </span>

</p>

<p id="seasons-help" class="hide">These parameters determine how long individuals live (before they die of old age).<br />

The <em>Fixed</em> option is the simplest. If this is selected every individual lives for at most the specified number of mating seasons.<br />

<span class="good-range">Recommended range for <em>Fixed seasons</em> 1 to 6 (integer)</span><br />

The <em><a href="http://www.math.wm.edu/~leemis/chart/UDR/PDFs/Discreteweibull.pdf">Discrete Weibull</a></em> option is a more realistic stochastic model of how long animals live.<br />
The <em>p</em> parameter is the probability of the individual having zero mating seasons. The <em>&Beta;</em> parameter gives the distribution its shape. A high value of &Beta; gives a very narrow distribution. E.g. if p is 0.3, the probability of not living to compete in any mating season is 0.3, and if &Beta; is 1, the average number of mating seasons that each individual will live through (excluding the possibility of being killed in a fight) is 2.3. If p is 0.1 and &Beta; is 1, the average number of mating seasons is just shy of 9. If p is 0,3 and &Beta; is 0.5, the average number of seasons is 5.1.<br />

<span class="good-range">Recommended range: There are many reasonable combinations of p and &Beta;. E.g. 0.3 and 1, but try to select the two parameters so that the average number of seasons is between 1 and 10.</span></p>

</fieldset>

<fieldset>

<legend class="sub-legend">Number of children per mating</legend>

<p>
<label class="radio-field" for="children_binom">Binomial distribution</label>
<input type="radio" id="children_binom" name="children" value="children_binom"
       onclick="$('#binom_children-parms').removeClass('hide');
		$('#fixed_children-parms').addClass('hide');" checked />

<label class="radio-field" for="children_fixed">Fixed</label>
<input type="radio" id="children_fixed" name="children"
       value="fixed"
       onclick="$('#binom_children-parms').addClass('hide');
		$('#fixed_children-parms').removeClass('hide');" />

<img class="help" src="help_icon.png" onclick="$('#children-help').toggleClass('hide');" class="help"/>
</p>
<p>
  <span id="binom_children-parms">
    <label class="radio-field" for="num_children_binom-n">n</label>
    <input class="radio-option" type="number" id="num_children_binom-n"
	   min="1" max="10000" value="6" required />
    <label class="radio-field" for="num_children_binom-p">p</label>
    <input class="radio-option" type="number" id="num_children_binom-p"
	   min="0" max="1" step="0.001" value="0.5" required />
  </span>
  <span id="fixed_children-parms" class="hide" >
  <label class="radio-field" for="num_kids">Offspring per mating</label>
  <input class="radio-option" type="number" id="num_kids" min="1" max="10000"
	 step="1" name="num_kids" value="2" required />
  </span>
</p>

<p id="children-help" class="help-text hide">
Specifies the number of children born when two individuals mate.<br />
The simpler <em>Fixed</em> option specifies a precise number of individuals born after every mating.<br />
<span class="good-range">Recommended range: 1 to 5 (integer).</span><br />
The <em>Binomial Distribution</em> option is arguably more realistic. <em>n</em> is the maximum number of children from a single mating, and <em>p</em> is the probability of any particular child being born.<br />
<span class="good-range">Recommended range: n: 1 to 5 (integer), p 0 to 1 (real).</span><br />
</p>

<p>
	<label class="field" for="num_kids">Mating strategy</label>
 	<select class="option" id="mating_strategy" name="mating_strategy">
  		<option value="monogamous">Monogamous</option>
  		<option value="polygamous">Polygamous</option>
	</select>
	<img class="help" src="help_icon.png" onclick="$('#mating_strategy-help').toggleClass('hide');" class="help"/>
</p>
<p id="mating_strategy-help" class="help-text hide">
If this is set to monogamous, the male winner of a fight only mates with one female in that mating seasons. If this is set to polygamous, the number of females the winning male mates with is equal to approximately the ratio of females to males.
</p>


</fieldset>


<fieldset>
  <legend class="sub-legend">Simulation details</legend>
  <p><label class="field" for="max_population">Maximum population</label>
    <input class="option" type="number" id="max_population" required
	   name="max_population" min="1" max="1000000" step="1"
	   value="20000">

  <img class="help" src="help_icon.png"
       onclick="$('#max_population-help').toggleClass('hide');" class="help"/></p>
  <p id="max_population-help" class="help-text hide">
    The maximum size of the population at which the simulation will halt. Setting this too large slows down the simulation, and can cause your browser to become unresponsive.<br />
    <span class="good-range">Recommended range: 1000-30000 (integer)</span>
  </p>

<legend class="sub-sub-legend">
Random number generation</legend>
<p>
<label class="radio-field" for="rng-javascript">Javascript default</label>
<input type="radio" id="rng-javascript" name="rng"
       onclick="$('#mersenne-parms').addClass('hide');" checked />

<label class="radio-field" for="rng-mersenne">Mersenne Twister</label>
<input type="radio" id="rng-mersenne" name="rng"
       onclick="$('#mersenne-parms').removeClass('hide');" />

<img class="help" src="help_icon.png"
     onclick="$('#seed-help').toggleClass('hide');"
     class="help"/>

</p>

<div id="mersenne-parms" class="hide">
  <p><label class="radio-field" for="seed">Random seed</label>
    <input class="radio-option" type="number" id="seed" name="seed" required
	   value="0" min="0" step="1" />
  </p>

</div>

<p id="seed-help" class="help-text hide">
  By default the simulation uses the Javascript random number generator.
  If you need a replicable high-quality, but possibly slower, generator,
  select the Mersenne Twister option, which also allows you to change the
  generator's seed.
</p>


</fieldset>

</div>

</div>

<p>
  <button class="submit-button btn btn-primary"
  			id="simbutton" type="submit" title="Run simulation">Simulate
  </button>
</p>

</form>

</div>

<div id="chart-div" class="col-md-6">

<fieldset>
<legend>Graph showing change in population</legend>

<svg height="50" width="500">
  <line x1="0" y1="20" x2="50" y2="20" style="stroke:rgb(255,0,0);stroke-width:2" />
  <text x="60" y="20" fill="red">Total population</text>
  <line x1="0" y1="40" x2="50" y2="40" style="stroke:yellow;stroke-width:2" />
  <text x="60" y="40" fill="black" >Peaceful - fewer homicidal genes than user specified proportion</text>
</svg>

<div class="ct-chart ct-perfect-fourth"></div>
<svg height="50" width="100%">
  <text x="40%" y="20" fill="black">Mating season</text>
</svg>

</fieldset>

</div>

</div>

<div id="output" >

</div>

<div id="footer">



<p>Copyright (C) <a href="http://nathangeffen.webfactional.com">Nathan Geffen</a> under the <a href="http://opensource.org/licenses/MIT">MIT License</a>.
<a href="https://github.com/nathangeffen/matestrat">Download this software</a>.
There are probably bugs, bad ones. And there are no doubt errors in the text.
Please tell me about bugs and errors by emailing nathangeffen at quackdown dot info or logging issues at the above code repository. <br />Published February 2015.</p>

</div>

</div>

</div>

</body>

</html>
